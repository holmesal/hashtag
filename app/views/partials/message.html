<!-- Profile photo -->
<div ng-if="!rolling || separated" class="userPhoto" ng-style="{'background-image':'url('+owner.photo+')',top:offsetTop}"></div>

<!-- Name row -->
<div class="metaRow">
  <p class="name" ng-if="!rolling || separated">{{owner.firstName}} {{owner.lastName}}</p>
  <p class="timeAgo" ng-if="!rolling || separated" am-time-ago="message.$priority"></p>
</div>

<div class="content">

  <p class="text" 
    ng-if="!preurl" 
    ng-bind-html="message.content.text | linky"></p>

  <!-- Todo - GIFs should have a template to themselves -->
  <video ng-if="message.type == 'gif' && message.content.converted" autoplay loop loadchirp ng-click="navigate(message.content.gfycat.website)">
    <source ng-src="{{vidurls.webm}}">
    <source ng-src="{{vidurls.mp4}}">
  </video>

  <img ng-if="message.type == 'image'" ng-src="{{message.content.src}}" ng-click="navigate(message.content.src)" loadchirp>

  <div ng-if="message.type == 'website'" class="website" ng-click="navigate(message.content.url)">
    <p class="title" ng-if="message.content.title">{{message.content.title}}</p>
    <p class="description" ng-if="message.content.description && !message.content.image">{{message.content.description}}</p>
    <img ng-src="{{message.content.image}}" loadchirp>
    <div class="buttonRow">
      <img class="favicon" ng-src="{{message.content.favicon}}">
      <p class="siteName" ng-if="message.content.siteName">{{message.content.siteName}}</p>
    </div>
  </div>

</div>
